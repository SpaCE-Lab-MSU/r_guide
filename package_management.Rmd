# Package Management

**Summary**: *use the 'renv' package to help manage your project's R packages, and to 'lock' in specific versions to avoid breaking changes:  https://rstudio.github.io/renv/articles/renv.html*

Nearly all R scripts require you to install additional packages.   Over time these packages are updated, and changes to one or more packages can cause conflicts or incompatibility errors.  In addition, you may be working or collaborating on multiple R projects with that use different and conflicting libraries.    Using 'install.packages()' by default will install in your home directory for all projects.   Finally, projects shold have a way to efficiently share which packages are needed for it to run.       

For those reasons several groups have create "package manager" is the way to deal with these.  The package  'renv', is a new library (Spring 2020 ),  and the first to handle it successfully  

The vignette for this package is very clearly written and easy to follow: https://rstudio.github.io/renv/articles/renv.html but here is a summary and a caveat

### Getting Started

Soon after creating a main folder for your project (in Rstudio or just for R), run the following : 

```{r eval=FALSE}
install.packages('renv') # if you haven't yet
renv::init()
```

This will read through your R code to find libraries you are using, and install them for this project.  It also creates an .Rprofile file that is use to 'activate' this project to use `renv` for all future package installations.  you may use `install.packages()` commands and Renv will capture them.  It creates a list of all of your packages in `renv.lock`

As you work, use `renv::snapshot()` to update the lock file. 

If you download a project that is using renv, it will have a `renv.lock` file which lists the packages that project needs.   You intall them using `renv::restore()`

### Additional actions
1) code errors will break renv initialization

When looking for packages to install, if there are syntax errors in R scripts (anywhere) the `renv::init()` process will crash.   You'll have to fix those errors (or comment them out) to proceed

2) gitignore 

In the `.gitignore` file add the renv folder (this is where packages are installed for your platform, else those will be included in your git repository

```
renv/**
```

Make sure to add .gitignore to the project git repository, and push the changes into github including the `renv.lock` file which lists the packages you just installed


3) instructions for users

In your README.md, add the information to use `renv::restore()` to let collaborators know how to get the packages they need. 

4) do-overs

If the lock file just isn't correct, or you need to update all the packages, you can re-use `renv::init()` to start over. 

