<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Configuration and R scripts | SpaCElab_R_Guide.utf8</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Configuration and R scripts | SpaCElab_R_Guide.utf8" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Configuration and R scripts | SpaCElab_R_Guide.utf8" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="contributing.html"/>
<link rel="next" href="this-would-have-to-go-at-the-top-of-each-function-that-needed-this-configuration.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"> R Programming Guide, MSU Spatial and Community Ecology Lab</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i><b>2</b> Contributing</a><ul>
<li class="chapter" data-level="2.1" data-path="contributing.html"><a href="contributing.html#prerequisites"><i class="fa fa-check"></i><b>2.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="configuration-and-r-scripts.html"><a href="configuration-and-r-scripts.html"><i class="fa fa-check"></i><b>3</b> Configuration and R scripts</a><ul>
<li class="chapter" data-level="3.1" data-path="configuration-and-r-scripts.html"><a href="configuration-and-r-scripts.html#quick-points-on-configuration"><i class="fa fa-check"></i><b>3.1</b> Quick Points on Configuration</a></li>
<li class="chapter" data-level="3.2" data-path="configuration-and-r-scripts.html"><a href="configuration-and-r-scripts.html#using-renviron"><i class="fa fa-check"></i><b>3.2</b> Using Renviron</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="this-would-have-to-go-at-the-top-of-each-function-that-needed-this-configuration.html"><a href="this-would-have-to-go-at-the-top-of-each-function-that-needed-this-configuration.html"><i class="fa fa-check"></i><b>4</b> this would have to go at the top of each function that needed this configuration</a><ul>
<li class="chapter" data-level="4.1" data-path="this-would-have-to-go-at-the-top-of-each-function-that-needed-this-configuration.html"><a href="this-would-have-to-go-at-the-top-of-each-function-that-needed-this-configuration.html#file-paths"><i class="fa fa-check"></i><b>4.1</b> File Paths</a></li>
<li class="chapter" data-level="4.2" data-path="this-would-have-to-go-at-the-top-of-each-function-that-needed-this-configuration.html"><a href="this-would-have-to-go-at-the-top-of-each-function-that-needed-this-configuration.html#complimentary-packages"><i class="fa fa-check"></i><b>4.2</b> Complimentary Packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="configuration-and-r-scripts" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Configuration and R scripts</h1>
<p>This is part of the solution for working with configuration in your R scripts. We are assuming that you want to share your scripts one for collaboration but also for reproducibility. One constant problem is scripts need to read files from somewhere, and everyone’s computer has different paths, or the paths differ when on the HPC. We often see scripts with the configuration variables at the top of the script, and you have to edit those to your environment, or comment them out. But then those go into the git repository, so collaborators have to change them back. Even for your own scripts, you may want to change a file path depending on if you are running on your laptop or on the HPC for example. It’s hard to track down all the places where you have to change these parameters (although global search/replace helps). But it would be better if there was a single, consistent place to put all configuration values shared by scripts in a project
Solution</p>
<p>R has a built in feature to read a file called .Renviron exactly for this purpose. Using files that start with “.” (so-called dot-files) for configuration is common in Linux, where R was born. Note There are a couple of libraries to make this a bit more slick, but this document describes only features that are part of Base R. We can add description of how to incorporate those below</p>
<p>Good summary of .Renviron : www.dartistics.com/renviron.html</p>
<p>Not a bad summary of Environment variables : <a href="https://en.wikipedia.org/wiki/Environment_variable" class="uri">https://en.wikipedia.org/wiki/Environment_variable</a></p>
<p>More detail on Environment vars in Mac/Linux : <a href="https://dev.to/gajesh/environment-variables-in-linux-and-mac-os-4j30" class="uri">https://dev.to/gajesh/environment-variables-in-linux-and-mac-os-4j30</a></p>
<p>To see how R reads dot-files .Renviron and .Rprofile, read the R help ?Startup or see this copy on the web ( I don’t know how current the copy is) : <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/Startup" class="uri">https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/Startup</a></p>
<p>Note that there is also a package called “startup” on CRAN which is an enhancement and not part of base R.</p>
<p>.Renviron is for setting values for script configuration. It uses the Operating System Environment to store these (e.g. not the same as an R environment), e.g. “environment variables” Any program can read or set an environment variable. One commonly used variable is $HOME which is your home directory.</p>
<div id="quick-points-on-configuration" class="section level2">
<h2><span class="header-section-number">3.1</span> Quick Points on Configuration</h2>
<p>when R starts it looks for two files</p>
<p>.Renviron &lt;- set of environment variables listed in here. Written as shell script</p>
<p>.Rprofile &lt;- options for how you like to use R. written as R code</p>
<p>If these files are in the local directory, it reads those and stops.</p>
<p>If not it looks for them in your home directory (global settings). It only reads one version (e.g. it doesn’t read local then also read global settings)</p>
</div>
<div id="using-renviron" class="section level2">
<h2><span class="header-section-number">3.2</span> Using Renviron</h2>
<pre><code>#  .Renviron file, each person makes their own copy of .Renviron  Note you can use existing operating system variables in this file.  This example works for Linux /Mac 
API_KEY=abc123
OUTPUT_PATH=&quot;$HOME/Documents/NEONOrganism/DataPull&quot;   </code></pre>
<p>inside the R code, which does not have to be edited by each person</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="contributing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="this-would-have-to-go-at-the-top-of-each-function-that-needed-this-configuration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["SpaCElab_R_Guide.pdf", "SpaCElab_R_Guide.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
