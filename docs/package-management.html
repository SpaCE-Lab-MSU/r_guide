<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Package Management | R Guide for Spatial &amp; Community Ecology</title>
  <meta name="description" content="Collection of R programming techniques and guidelines for collaborating with the MSU SpaCE Lab" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Package Management | R Guide for Spatial &amp; Community Ecology" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Collection of R programming techniques and guidelines for collaborating with the MSU SpaCE Lab" />
  <meta name="github-repo" content="space-lab-msu/r_guide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Package Management | R Guide for Spatial &amp; Community Ecology" />
  
  <meta name="twitter:description" content="Collection of R programming techniques and guidelines for collaborating with the MSU SpaCE Lab" />
  

<meta name="author" content="Patrick Bills, MSU SpaCE Lab" />
<meta name="author" content="Phoebe Zarnetske, MSU SpaCE Lab" />
<meta name="author" content="your name here! (see contributing below)" />


<meta name="date" content="2021-11-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rmarkdown.html"/>
<link rel="next" href="writing-scripts.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MSU SpaCElab R Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#contributing"><i class="fa fa-check"></i><b>0.1</b> Contributing</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installing R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#installing-r"><i class="fa fa-check"></i><b>1.2</b> Installing R</a></li>
<li class="chapter" data-level="1.3" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#installing-rstudio"><i class="fa fa-check"></i><b>1.3</b> Installing RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#about-r-packages-briefly"><i class="fa fa-check"></i><b>1.4</b> About R Packages, briefly</a></li>
<li class="chapter" data-level="1.5" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#next"><i class="fa fa-check"></i><b>1.5</b> Next</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="documentation.html"><a href="documentation.html"><i class="fa fa-check"></i><b>2</b> Documentation</a></li>
<li class="chapter" data-level="3" data-path="configuration.html"><a href="configuration.html"><i class="fa fa-check"></i><b>3</b> Configuration</a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="configuration.html"><a href="configuration.html#solution"><i class="fa fa-check"></i><b>3.0.1</b> Solution</a></li>
<li class="chapter" data-level="3.1" data-path="configuration.html"><a href="configuration.html#quick-points-on-configuration"><i class="fa fa-check"></i><b>3.1</b> Quick Points on Configuration</a></li>
<li class="chapter" data-level="3.2" data-path="configuration.html"><a href="configuration.html#using-renviron"><i class="fa fa-check"></i><b>3.2</b> Using Renviron</a></li>
<li class="chapter" data-level="3.3" data-path="configuration.html"><a href="configuration.html#file-paths-standard-configuration"><i class="fa fa-check"></i><b>3.3</b> File Paths STandard Configuration</a></li>
<li class="chapter" data-level="3.4" data-path="configuration.html"><a href="configuration.html#r-packages-for-configuration"><i class="fa fa-check"></i><b>3.4</b> R Packages for Configuration</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>4</b> RMarkdown</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#examples-of-rmarkdown"><i class="fa fa-check"></i><b>4.1</b> Examples of RMarkdown:</a></li>
<li class="chapter" data-level="4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#r-notebooks"><i class="fa fa-check"></i><b>4.2</b> R Notebooks</a></li>
<li class="chapter" data-level="4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-knittr-and-file-paths"><i class="fa fa-check"></i><b>4.3</b> RMarkdown, Knittr and File paths</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="package-management.html"><a href="package-management.html"><i class="fa fa-check"></i><b>5</b> Package Management</a>
<ul>
<li class="chapter" data-level="5.1" data-path="package-management.html"><a href="package-management.html#renv"><i class="fa fa-check"></i><b>5.1</b> renv</a></li>
<li class="chapter" data-level="5.2" data-path="package-management.html"><a href="package-management.html#renv-usage-notes"><i class="fa fa-check"></i><b>5.2</b> renv usage notes</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="writing-scripts.html"><a href="writing-scripts.html"><i class="fa fa-check"></i><b>6</b> Writing Scripts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="writing-scripts.html"><a href="writing-scripts.html#naming-things"><i class="fa fa-check"></i><b>6.1</b> Naming Things</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="writing-scripts.html"><a href="writing-scripts.html#script-file-names"><i class="fa fa-check"></i><b>6.1.1</b> Script File Names</a></li>
<li class="chapter" data-level="6.1.2" data-path="writing-scripts.html"><a href="writing-scripts.html#variable-and-function-names"><i class="fa fa-check"></i><b>6.1.2</b> <strong>Variable and Function Names</strong></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="writing-scripts.html"><a href="writing-scripts.html#writing-code"><i class="fa fa-check"></i><b>6.2</b> writing code</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="writing-scripts.html"><a href="writing-scripts.html#editor"><i class="fa fa-check"></i><b>6.2.1</b> <strong>Editor</strong></a></li>
<li class="chapter" data-level="6.2.2" data-path="writing-scripts.html"><a href="writing-scripts.html#line-endings"><i class="fa fa-check"></i><b>6.2.2</b> <strong>Line Endings</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="using-r-with-git.html"><a href="using-r-with-git.html"><i class="fa fa-check"></i><b>7</b> Using R with Git</a></li>
<li class="chapter" data-level="8" data-path="data-generation-workflow-with-make.html"><a href="data-generation-workflow-with-make.html"><i class="fa fa-check"></i><b>8</b> Data Generation Workflow with “Make”</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-generation-workflow-with-make.html"><a href="data-generation-workflow-with-make.html#motivation"><i class="fa fa-check"></i><b>8.1</b> Motivation</a></li>
<li class="chapter" data-level="8.2" data-path="data-generation-workflow-with-make.html"><a href="data-generation-workflow-with-make.html#usage"><i class="fa fa-check"></i><b>8.2</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="making-plots-in-r.html"><a href="making-plots-in-r.html"><i class="fa fa-check"></i><b>9</b> Making Plots in R</a>
<ul>
<li class="chapter" data-level="9.1" data-path="making-plots-in-r.html"><a href="making-plots-in-r.html#ggplot2"><i class="fa fa-check"></i><b>9.1</b> ggplot2</a></li>
<li class="chapter" data-level="9.2" data-path="making-plots-in-r.html"><a href="making-plots-in-r.html#base-r-plotting"><i class="fa fa-check"></i><b>9.2</b> Base R plotting</a></li>
<li class="chapter" data-level="9.3" data-path="making-plots-in-r.html"><a href="making-plots-in-r.html#color-on-plots"><i class="fa fa-check"></i><b>9.3</b> Color on plots</a></li>
<li class="chapter" data-level="9.4" data-path="making-plots-in-r.html"><a href="making-plots-in-r.html#plotting-spatial-data-in-r"><i class="fa fa-check"></i><b>9.4</b> Plotting spatial data in R</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.communityecologylab.com/" target="blank"><strong>MSU SpaCE Lab</strong></a></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Guide for Spatial &amp; Community Ecology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="package-management" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Package Management</h1>
<p><strong>Summary</strong>: <em>use the ‘renv’ package to help manage your project’s R packages, and to ‘lock’ in specific versions to avoid breaking changes: <a href="https://rstudio.github.io/renv/articles/renv.html" class="uri">https://rstudio.github.io/renv/articles/renv.html</a></em></p>
<p>Nearly all R scripts require you to install additional packages. Over time these packages are updated, and changes to one or more packages can cause conflicts or incompatibility errors. In addition, you may be working or collaborating on multiple R projects with that use different and conflicting libraries. Using ‘install.packages()’ by default will install in your home directory for all projects. Finally, projects shold have a way to efficiently share which packages are needed for it to run. For those reasons several groups have create “package manager” is the way to deal with these.</p>
<div id="renv" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> renv</h2>
<p>The package <a href="https://cran.r-project.org/web/packages/renv/index.html">‘renv’</a>, is a new library ( as of Spring 2020 ) that seems to be the first to handle package management successfully and easily. Because it’s new there may be rough edges but so far seems to be useful to many users. Rstudio has a very clearly written and easy to follow summary ( <a href="https://rstudio.github.io/renv/articles/renv.html" class="uri">https://rstudio.github.io/renv/articles/renv.html</a> ) but here is a quick summary:</p>
<p>Soon after creating a main folder for your project (in Rstudio or just for R), or even cloning a someone else’s repository, run the following :</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="package-management.html#cb9-1" aria-hidden="true"></a><span class="kw">install.packages</span>(<span class="st">&#39;renv&#39;</span>) <span class="co"># if you haven&#39;t yet</span></span>
<span id="cb9-2"><a href="package-management.html#cb9-2" aria-hidden="true"></a>renv<span class="op">::</span><span class="kw">init</span>()</span></code></pre></div>
<p>This will read through the R code to find libraries you are using, and install them for this project. It creates a new file in your project <code>renv.lock</code> that is a list of all packages and versions of the packages for this project. It also creates (or adds to ) an .Rprofile file in your project that ‘activate’ this project to use <code>renv</code> whenever you start the R session. Forfuture package installations you may use <code>install.packages()</code> commands and Renv will capture them. As you work, use <code>renv::snapshot()</code> to update the lock file as needed.</p>
<p>If you download a project that is using renv, it will have a <code>renv.lock</code> file which lists the packages that project needs. You intall them using <code>renv::restore()</code></p>
</div>
<div id="renv-usage-notes" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> renv usage notes</h2>
<ol style="list-style-type: decimal">
<li>code errors will halt renv initialization</li>
</ol>
<p>When <code>renv::init()</code> process parses the R scripts in a project, looking for packages to install, any syntax errors will crash. You’ll have to fix those errors (or comment them out) any try again.</p>
<ol start="2" style="list-style-type: decimal">
<li>gitignore</li>
</ol>
<p>In the <code>.gitignore</code> file add the renv folder (this is where packages are installed for your platform, else those will be included in your git repository</p>
<pre><code>renv/**</code></pre>
<p>Make sure to add .gitignore to the project git repository, and push the changes into github. Note that you <em>shoudl</em> include <code>renv.lock</code> file in the git repository, which lists the packages you just installed. For more information see <a href="https://cran.r-project.org/web/packages/renv/vignettes/collaborating.html" class="uri">https://cran.r-project.org/web/packages/renv/vignettes/collaborating.html</a></p>
<ol start="3" style="list-style-type: decimal">
<li>instructions for users</li>
</ol>
<p>In your README.md, add the information to use <code>renv::restore()</code> to let collaborators know how to get the packages they need.</p>
<ol start="4" style="list-style-type: decimal">
<li>do-overs</li>
</ol>
<p>If the lock file just isn’t correct, or you need to update all the packages, you can re-use <code>renv::init()</code> to start over.</p>
<ol start="5" style="list-style-type: decimal">
<li>package development caveats</li>
</ol>
<p>When building a package tarball, R will copy all files within the package directory to a temporary build directory including the renv library which could be slow if this folder was large. See <a href="https://cran.r-project.org/web/packages/renv/vignettes/packages.html" class="uri">https://cran.r-project.org/web/packages/renv/vignettes/packages.html</a> for a work-around and other hints on apckage development.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rmarkdown.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="writing-scripts.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
